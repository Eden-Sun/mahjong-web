# éº»å°‡éŠæˆ²æ‰‹æ©Ÿå„ªåŒ–ç¸½çµ

## æœ€æ–°æ›´æ–° (2026-02-11 10:05)

### ğŸš€ å¸ƒå±€ä¿®å¾©ï¼šä¸‰å€‹ AI åœ¨é ‚éƒ¨ + æ‰‹ç‰Œå¯è¦‹å¯é»

**å•é¡Œï¼š**
- æ‰‹ç‰Œå€åŸŸè¢«æ¨å‡ºè¢å¹•å¤–ï¼Œç„¡æ³•é»æ“Š
- éŠæˆ²å…¨è¢å¹•å¾Œæ•´é«”é«˜åº¦å¤±æ§

**ä¿®å¾©ï¼š**
1. âœ… **ä¸‰å€‹ AI ç©å®¶åœ¨é ‚éƒ¨ä¸€è¡Œ**ï¼ˆåŸæœ¬ 2 ä¸Š + 1 å·¦ï¼‰
   - ç§»é™¤å·¦å´ `.left-player` å€åŸŸ
   - æ‰€æœ‰ä¸‰å€‹ AI æ”¾å…¥ `.top-players` ä¸€è¡Œé¡¯ç¤º
   - ç¯€çœæ©«å‘ç©ºé–“ï¼Œæ›´ç¬¦åˆæ‰‹æ©Ÿç›´ç«‹æ¨¡å¼

2. âœ… **ç§»é™¤ `min-height: 100vh`**
   - `#game-container` åŸæœ¬å¼·åˆ¶æ’æ»¿ 100vh
   - å°è‡´å…§å®¹æº¢å‡ºï¼Œæ‰‹ç‰Œè¢«æ¨å‡ºè¢å¹•
   - æ”¹ç‚ºåªè¨­å®š `height` å’Œ `max-height`

3. âœ… **æ‰‹ç‰Œå€åŸŸå›ºå®šåœ¨åº•éƒ¨**
   - `flex: 0 0 auto` ç¢ºä¿ä¸æœƒè¢«æ“ å£“
   - `min-height: 180px` ç¢ºä¿æœ€å°å¯è¦‹é«˜åº¦
   - `max-height: 35vh` é¿å…ä½”ç”¨éå¤šç©ºé–“
   - `z-index: 100` ç¢ºä¿åœ¨æœ€ä¸Šå±¤

**æäº¤ï¼š** acb1a6a

---

## ä¹‹å‰æ›´æ–° (2026-02-11)

### ğŸ¯ æ ¸å¿ƒå„ªåŒ–ï¼šç¢ºä¿æ‰‹ç‰Œå€åŸŸå§‹çµ‚å¯è¦‹

æœ¬æ¬¡å„ªåŒ–é‡é»è§£æ±ºæ‰‹ç‰Œå€åŸŸè¢«æ¨å‡ºè¢å¹•å¤–çš„å•é¡Œï¼Œé€šéç²¾ç¢ºçš„ Flexbox å¸ƒå±€æ§åˆ¶ï¼Œç¢ºä¿ï¼š
- âœ… é ‚éƒ¨ AI ç©å®¶å€åŸŸï¼šå›ºå®šé«˜åº¦ï¼Œä¸æœƒå¢é•·
- âœ… ä¸­é–“ç‰Œæ¡Œå€åŸŸï¼šå½ˆæ€§å¢é•·ï¼Œå¯æ»¾å‹•
- âœ… åº•éƒ¨æ‰‹ç‰Œå€åŸŸï¼šåš´æ ¼å›ºå®šï¼Œå§‹çµ‚å¯è¦‹

## å„ªåŒ–å…§å®¹

### 1. Flexbox å¸ƒå±€æ¶æ§‹å„ªåŒ–

#### é—œéµ Flex å±¬æ€§è¨­å®š

**ä¸»å®¹å™¨ (`#game-container`)**:
```css
height: 100vh !important;
max-height: 100vh !important;
min-height: 100vh !important; /* é˜²æ­¢ç¸®å° */
display: flex;
flex-direction: column;
overflow: hidden;
```

**é ‚éƒ¨å€åŸŸ (`.top-players`)**:
```css
flex: 0 0 auto !important; /* ä¸å¢é•·ã€ä¸ç¸®å°ã€è‡ªå‹•é«˜åº¦ */
max-height: 80px;
min-height: 60px;
```

**ä¸­é–“å€åŸŸ (`.middle-area`)**:
```css
flex: 1 1 0 !important; /* å¢é•·å¡«å……ç©ºé–“ã€å¯ç¸®å°ã€å¾0é–‹å§‹ */
min-height: 0 !important; /* é—œéµï¼šå…è¨±ç¸®å° */
max-height: 100% !important;
overflow: hidden;
```

**ç‰Œæ¡Œ (`.game-board`)**:
```css
flex: 1 1 0 !important;
min-height: 0 !important; /* é—œéµï¼šè§¸ç™¼æ»¾å‹• */
overflow: hidden;
```

**ç‰Œæ¡Œå…§å®¹ (`.game-board-content`)**:
```css
flex: 1 1 0 !important;
min-height: 0 !important; /* é—œéµï¼šå…è¨±ç¸®å°ä¸¦æ»¾å‹• */
overflow-y: auto;
-webkit-overflow-scrolling: touch;
```

**æ‰‹ç‰Œå€åŸŸ (`.player-hand-container`)**:
```css
flex: 0 0 auto !important; /* åš´æ ¼å›ºå®šï¼Œçµ•ä¸å¢é•·æˆ–ç¸®å° */
max-height: 40vh !important; /* æœ€å¤šä½”40%è¦–å£ */
min-height: 160px !important; /* ç¢ºä¿æœ€å°å¯è¦‹é«˜åº¦ */
z-index: 100 !important; /* ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
```

**æ‰‹ç‰Œå…§å®¹ (`.player-hand-tiles`)**:
```css
flex: 1 1 0 !important;
min-height: 0 !important; /* å…è¨±ç¸®å°ä¸¦æ»¾å‹• */
overflow-y: auto;
```

### 2. é—œéµæŠ€è¡“è¦é»

#### min-height: 0 çš„é‡è¦æ€§
- åœ¨ Flexbox ä¸­ï¼Œé»˜èª `min-height: auto` æœƒé˜»æ­¢å…ƒç´ ç¸®å°
- è¨­å®š `min-height: 0` å…è¨±å­å…ƒç´ æ ¹æ“šå…§å®¹å¤§å°ç¸®å°
- é€™æ˜¯è§¸ç™¼æ»¾å‹•è¡Œç‚ºçš„é—œéµ

#### flex: 1 1 0 vs flex: 1 1 auto
- `flex: 1 1 0`: å¾0é–‹å§‹å¢é•·ï¼Œæ›´å®¹æ˜“æ§åˆ¶å¤§å°
- `flex: 1 1 auto`: å¾å…§å®¹å¤§å°é–‹å§‹ï¼Œå¯èƒ½å°è‡´æº¢å‡º
- å¯æ»¾å‹•å€åŸŸæ‡‰ä½¿ç”¨ `flex: 1 1 0`

#### overflow å±¤ç´šæ§åˆ¶
- çˆ¶å®¹å™¨: `overflow: hidden` (é˜²æ­¢å¤–å±¤æ»¾å‹•)
- æ»¾å‹•å®¹å™¨: `overflow-y: auto` (å•Ÿç”¨å…§éƒ¨æ»¾å‹•)
- å›ºå®šå®¹å™¨: `overflow: hidden` (é˜²æ­¢æ„å¤–æ»¾å‹•)

### 3. éŸ¿æ‡‰å¼æ–·é»èˆ‡é«˜åº¦åˆ†é…

#### ç›´ç«‹æ¨¡å¼ (<768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é ‚éƒ¨AI (60-80px)    â”‚ â† flex: 0 0 auto (å›ºå®š)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     â”‚
â”‚ ä¸­é–“ç‰Œæ¡Œ (å½ˆæ€§)     â”‚ â† flex: 1 1 0 (å¯æ»¾å‹•)
â”‚                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åº•éƒ¨æ‰‹ç‰Œ (160-40vh) â”‚ â† flex: 0 0 auto (å›ºå®š)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ©«å±æ¨¡å¼ (<812px landscape)
```css
.player-hand-container {
  max-height: 50vh !important; /* å¢åŠ åˆ°50% */
  min-height: 120px !important;
}
```

#### å°æ‰‹æ©Ÿ (<480px)
```css
.player-hand-container {
  max-height: 38vh !important; /* æ¸›å°‘åˆ°38% */
  min-height: 140px !important;
}
```

### 4. å…ƒç´ å°ºå¯¸

**æ‰‹æ©Ÿ (<768px)**:
- æ‰‹ç‰Œ: 42Ã—56px
- æ¨ç‰Œ(ç•¶ä¸‹): 55Ã—75px
- æ¨ç‰Œ(æ­·å²): 30Ã—45px
- å·²çµ„ç‰Œ: 38Ã—52px

**å°æ‰‹æ©Ÿ (<480px)**:
- æ‰‹ç‰Œ: 38Ã—52px
- æ¨ç‰Œ(ç•¶ä¸‹): 50Ã—68px
- æ¨ç‰Œ(æ­·å²): 28Ã—40px
- å·²çµ„ç‰Œ: 36Ã—50px

### 5. æ€§èƒ½å„ªåŒ–

#### GPU åŠ é€Ÿ
```css
transform: translateZ(0);
-webkit-backface-visibility: hidden;
will-change: scroll-position;
```

#### è§¸æ§æ»¾å‹•å„ªåŒ–
```css
-webkit-overflow-scrolling: touch;
scroll-behavior: smooth;
overscroll-behavior: contain;
```

#### æ¸›å°‘é‡ç¹ª
```css
contain: layout style paint;
will-change: transform, opacity;
```

### 6. è§¸æ§é«”é©—
- âœ… æœ€å°è§¸æ§å€åŸŸ 44px (iOS æ¨™æº–)
- âœ… è§¸æ§åé¥‹å‹•ç•« (`:active` scale)
- âœ… é˜²æ­¢èª¤è§¸ (`touch-action: manipulation`)
- âœ… ç¦ç”¨é»æ“Šé«˜äº® (`-webkit-tap-highlight-color: transparent`)

### 7. è¦–è¦ºå„ªåŒ–
- âœ… ç·Šæ¹Šé–“è· (4-10px ä¾è¨­å‚™)
- âœ… ç¸®å°å­—é«” (0.7-1.1em)
- âœ… å„ªåŒ–æ»¾å‹•æ¢æ¨£å¼ (4px å¯¬ï¼ŒåŠé€æ˜)
- âœ… éš±è—ä¸å¿…è¦å…ƒç´  (å·¦å´AIç©å®¶)

## æ–‡ä»¶çµæ§‹
```
src/styles/
â”œâ”€â”€ layout.css              # åŸºç¤ Flexbox å¸ƒå±€ (æ¡Œé¢+æ‰‹æ©Ÿ)
â”œâ”€â”€ mobile-optimized.css    # æ‰‹æ©Ÿå°ˆå±¬å„ªåŒ–æ¨£å¼
â”œâ”€â”€ tile.css                # ç‰Œå¡æ¨£å¼
â””â”€â”€ discard-timeline.css    # æ¨ç‰Œæ± æ¨£å¼
```

## æ¸¬è©¦æª¢æŸ¥æ¸…å–®

### ç›´ç«‹æ¨¡å¼æ¸¬è©¦
- [ ] æ‰‹ç‰Œå€åŸŸå§‹çµ‚å¯è¦‹æ–¼è¢å¹•åº•éƒ¨
- [ ] ä¸­é–“ç‰Œæ¡Œå€åŸŸå¯ä»¥å‚ç›´æ»¾å‹•
- [ ] é ‚éƒ¨AIç©å®¶è³‡è¨Šä¸æœƒè¢«é®æ“‹
- [ ] æ»¾å‹•æµæš¢ï¼Œç„¡å¡é “
- [ ] æ‰€æœ‰æŒ‰éˆ•å‡å¯é»æ“Šï¼ˆæœ€å°44pxï¼‰

### æ©«å±æ¨¡å¼æ¸¬è©¦
- [ ] æ‰‹ç‰Œå€åŸŸé©ç•¶å¢å¤§ï¼ˆ50vhï¼‰
- [ ] å¸ƒå±€ä¸æœƒè¢«å£“ç¸®è®Šå½¢
- [ ] æ»¾å‹•è¡Œç‚ºæ­£å¸¸
- [ ] å…§å®¹ä¸æœƒæº¢å‡ºè¦–å£

### ä¸åŒå°ºå¯¸è¨­å‚™
- [ ] å°æ‰‹æ©Ÿ (<480px): å…ƒç´ å°ºå¯¸ç¸®å°é©ç•¶
- [ ] ä¸­å‹æ‰‹æ©Ÿ (480-768px): æ¨™æº–å°ºå¯¸æ­£å¸¸
- [ ] å¤§æ‰‹æ©Ÿ (>768px): é¡¯ç¤ºå®Œæ•´å…§å®¹

### äº’å‹•æ¸¬è©¦
- [ ] æ²å‹•ç‰Œæ¡Œæ™‚ï¼Œæ‰‹ç‰Œå€åŸŸä¿æŒå›ºå®š
- [ ] æ‰‹ç‰Œéå¤šæ™‚ï¼Œå¯åœ¨æ‰‹ç‰Œå€åŸŸå…§æ»¾å‹•
- [ ] é»æ“Šæ‰‹ç‰Œåæ‡‰éˆæ•
- [ ] æ¨ç‰Œå‹•ç•«æµæš¢

### æ€§èƒ½æ¸¬è©¦
- [ ] æ»¾å‹•æ™‚å¹€ç‡ä¿æŒ60fps
- [ ] ç„¡æ˜é¡¯å¡é “æˆ–å»¶é²
- [ ] è¨˜æ†¶é«”ä½¿ç”¨ç©©å®š

## å·²çŸ¥é™åˆ¶
- å°æ–¼ 320px å¯¬åº¦çš„æ¥µå°è¢å¹•æœªå„ªåŒ–
- å¹³æ¿å°ºå¯¸ (768-1024px) ä½¿ç”¨æ¡Œé¢å¸ƒå±€
- éƒ¨åˆ†èˆŠç‰ˆç€è¦½å™¨å¯èƒ½ä¸æ”¯æ´æŸäº› CSS å±¬æ€§

## èª¿è©¦æŠ€å·§

### æª¢æŸ¥å…ƒç´ æ˜¯å¦è¢«æ¨å‡ºè¦–å£
```javascript
// åœ¨ç€è¦½å™¨æ§åˆ¶å°åŸ·è¡Œ
const hand = document.querySelector('.player-hand-container');
const rect = hand.getBoundingClientRect();
console.log('æ‰‹ç‰Œå€åŸŸä½ç½®:', {
  top: rect.top,
  bottom: rect.bottom,
  height: rect.height,
  viewportHeight: window.innerHeight,
  visible: rect.bottom <= window.innerHeight
});
```

### æª¢æŸ¥ Flex å±¬æ€§
```javascript
// æª¢æŸ¥æ‰€æœ‰ä¸»è¦å€åŸŸçš„ flex å±¬æ€§
['#game-container', '.top-players', '.middle-area', '.game-board', '.player-hand-container']
  .forEach(selector => {
    const el = document.querySelector(selector);
    const style = window.getComputedStyle(el);
    console.log(selector, {
      flex: style.flex,
      flexGrow: style.flexGrow,
      flexShrink: style.flexShrink,
      flexBasis: style.flexBasis,
      minHeight: style.minHeight,
      maxHeight: style.maxHeight,
      height: style.height
    });
  });
```

## æœªä¾†æ”¹é€²æ–¹å‘
- [ ] æ·»åŠ æ‰‹å‹¢æ”¯æŒ (æ»‘å‹•å‡ºç‰Œ)
- [ ] æ”¯æ´å‹•æ…‹è¦–å£å–®ä½ (dvh) ä»¥è™•ç†ç§»å‹•ç€è¦½å™¨å·¥å…·åˆ—
- [ ] æ·»åŠ è§¸è¦ºåé¥‹ (æŒ¯å‹•)
- [ ] å„ªåŒ–å‹•ç•«æ€§èƒ½ (ä½¿ç”¨ CSS è®Šæ•¸)
- [ ] æ”¯æ´æ›´å¤šè¢å¹•æ–¹å‘é–å®š
- [ ] æ·»åŠ ç„¡éšœç¤™åŠŸèƒ½ (ARIA labels)

## æ›´æ–° (2026-02-11 11:30)

### ğŸ”§ é—œéµä¿®å¾©ï¼šå¼·åˆ¶é™åˆ¶ç‰Œæ¡Œé«˜åº¦

**å•é¡Œï¼š** å³ä½¿è¨­å®šäº† flex: 0 0 autoï¼Œæ‰‹ç‰Œå€åŸŸä»è¢«æ¨å‡ºè¢å¹•å¤–ã€‚

**æ ¹æœ¬åŸå› ï¼š**
1. `#game-container` çš„ `min-height: 100vh` å¼·åˆ¶å®¹å™¨æ’æ»¿è¦–å£
2. `.middle-area` çš„ `flex: 1 1 0` æœƒç›¡å¯èƒ½å¢é•·ï¼Œä½”ç”¨æ‰€æœ‰å‰©é¤˜ç©ºé–“
3. å³ä½¿æ‰‹ç‰Œè¨­å®š `flex: 0 0 auto`ï¼Œå› ç‚ºç‰Œæ¡Œå·²ä½”æ»¿ç©ºé–“ï¼Œæ‰‹ç‰Œè¢«æ¨å‡ºè¦–å£

**è§£æ±ºæ–¹æ¡ˆï¼š**
1. **ç§»é™¤ `min-height: 100vh`** â€” è®“å…§å®¹è‡ªç„¶åˆ†é…ï¼Œé¿å…å¼·åˆ¶æ’æ»¿
2. **é™åˆ¶ç‰Œæ¡Œæœ€å¤§é«˜åº¦** â€” ä½¿ç”¨ `calc(100vh - é ‚éƒ¨ - æ‰‹ç‰Œ - gap)`
3. **æ‰‹ç‰Œä½¿ç”¨å›ºå®š flex-basis** â€” å¾ `flex: 0 0 auto` æ”¹æˆ `flex: 0 0 200px`

**ä¿®æ”¹ç´°ç¯€ï¼š**

```css
/* æ¨™æº–æ¨¡å¼ (<768px) */
.middle-area {
  max-height: calc(100vh - 80px - 200px - 18px) !important;
}
.player-hand-container {
  flex: 0 0 200px !important;
  min-height: 200px !important;
}

/* å°æ‰‹æ©Ÿ (<480px) */
.middle-area {
  max-height: calc(100vh - 70px - 160px - 15px) !important;
}
.player-hand-container {
  flex: 0 0 160px !important;
  min-height: 160px !important;
}

/* æ©«å± (<812px landscape) */
.middle-area {
  max-height: calc(100vh - 70px - 140px - 12px) !important;
}
.player-hand-container {
  flex: 0 0 140px !important;
  min-height: 140px !important;
}
```

**æ•ˆæœï¼š**
- âœ… æ‰‹ç‰Œå€åŸŸå§‹çµ‚å›ºå®šåœ¨è¢å¹•åº•éƒ¨
- âœ… ç‰Œæ¡Œå€åŸŸä¸æœƒç„¡é™å¢é•·
- âœ… ç‰Œæ¡Œå…§å®¹éå¤šæ™‚å¯æ»¾å‹•
- âœ… ä¸‰ç¨®æ¨¡å¼ï¼ˆæ¨™æº–/å°æ‰‹æ©Ÿ/æ©«å±ï¼‰éƒ½æ­£å¸¸å·¥ä½œ

**æäº¤ï¼š** a096462
